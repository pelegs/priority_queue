=>PYTHONTEX#py#default#default#0#code#####89#
from math import inf
from libpq import *

t = inf
while t == inf or t < 1 or t > 20:
		p = Particle(
						pos = np.zeros(2),
						vel = np.random.uniform(-2, 2, 2),
						radius = np.random.uniform(0.5, 1),
						)
		w = Wall(
						center = np.random.uniform(-20,20,2),
						d1 = np.random.uniform(-10,10,2)
						)
		t = time_to_pw_collision(p, w)

wcx, wcy = w.center
wd1x, wd1y = w.d1
wnx, wny = w.normal
px, py = p.pos
pvx, pvy = p.vel
R = p.radius
x_s = p.pos + p.vel*(t + p.radius/np.linalg.norm(p.vel))
x_s_x, x_s_y = x_s

# Advance particle
p.move(t)
px_, py_ = p.pos
p.vel = pw_collision(p, w)
pvx_, pvy_ = p.vel

drawstr = """
\\begin{{tikzpicture}}
	\\draw[dline] ({},{}) -- ({},{});
	\\draw[wall] ({},{}) -- ++({},{});
	\\draw[wall] ({},{}) -- ++({},{});
	\\draw[vector] ({},{}) -- ++({},{});
	\\draw[draw=col1, fill=col1!30] ({},{}) circle ({});
	\\draw[vector] ({},{}) -- ++({},{});
	\\draw[draw=col1, fill=col1!30] ({},{}) circle ({});
	\\draw[vector] ({},{}) -- ++({},{});
	\\draw[fill=col1] ({},{}) circle (0.2);
\\end{{tikzpicture}}
""".format(
						px, py, px_, py_,
						wcx, wcy, wd1x, wd1y,
						wcx, wcy, -wd1x, -wd1y,
						wcx, wcy, wnx, wny,
						px, py, R,
						px, py, pvx, pvy,
						px_, py_, R,
						px_, py_, pvx_, pvy_,
						x_s_x, x_s_y,
					)
print(drawstr)
=>PYTHONTEX:SETTINGS#
version=0.17
outputdir=pythontex-files-validation
workingdir=.
workingdirset=false
gobble=none
rerun=default
hashdependencies=default
makestderr=false
stderrfilename=full
keeptemps=none
pyfuture=default
pyconfuture=none
pygments=true
pygglobal=:GLOBAL||
fvextfile=-1
pyconbanner=none
pyconfilename=stdin
depythontex=false
pygfamily=py|python3|
pygfamily=pycon|pycon|
pygfamily=sympy|python3|
pygfamily=sympycon|pycon|
pygfamily=pylab|python3|
pygfamily=pylabcon|pycon|
