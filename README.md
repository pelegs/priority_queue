A priority queue based simulation
